## STEP 1: Install grafana on its own server 10.0.0.92
```sh
sudo apt-get install -y apt-transport-https software-properties-common wget

sudo mkdir -p /etc/apt/keyrings/
wget -q -O - https://apt.grafana.com/gpg.key | gpg --dearmor | sudo tee /etc/apt/keyrings/grafana.gpg > /dev/null

echo "deb [signed-by=/etc/apt/keyrings/grafana.gpg] https://apt.grafana.com stable main" | sudo tee -a /etc/apt/sources.list.d/grafana.list

sudo apt-get update

sudo apt-get install -y grafana

sudo systemctl daemon-reload
sudo systemctl start grafana-server

sudo systemctl status grafana-server

sudo systemctl enable grafana-server.service
# Alternatively, create a file in /etc/systemd/system/grafana-server.service.d/override.conf
sudo systemctl edit grafana-server.service

#############################################################################
[Service]
# Give the CAP_NET_BIND_SERVICE capability
CapabilityBoundingSet=CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_BIND_SERVICE

# A private user cannot have process capabilities on the host's user
# namespace and thus CAP_NET_BIND_SERVICE has no effect.
PrivateUsers=false
#############################################################################

## Restart the Grafana server using systemd
sudo systemctl restart grafana-server


## login
http://10.0.0.19:3000

admin
admin
```

## STEP 2: configure the certs generated by Vault
```sh
sudo mv /tmp/grafana.crt /etc/grafana/
sudo mv /tmp/grafana.key /etc/grafana/
sudo mv /tmp/ca.crt /etc/grafana/

## configure [server] section with cert_file and cert_key
sudo nano /etc/grafana/grafana.ini

#################################### Server ####################
[server]
# Protocol (http, https, h2, socket)
protocol = https
http_port = 3000
domain = grafana.pixiescloud.com
cert_file = /etc/grafana/grafana.crt
cert_key = /etc/grafana/grafana.key
#################################################################

## give permission to the files  [ exit root ]
whoami
sudo chown cafanwii:cafanwii /etc/grafana/
sudo chown cafanwii:cafanwii /etc/grafana/*

## Restart Grafana
sudo systemctl restart grafana-server
```

## STEP 3: Run NGINX Reverse Proxy on Port 443
```sh
## Install nginx

sudo apt install nginx


## Add the proxy code in the file

cd /etc/nginx/sites-enabled
sudo cp default collins-default
sudo vi default    

## Restart the servers
sudo systemctl restart nginx.service
sudo systemctl restart grafana-server
```

https://grafana.pixiescloud.com